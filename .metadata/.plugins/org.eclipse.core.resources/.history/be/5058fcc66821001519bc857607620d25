'''
Created on 3 Jul 2015

@author: sduprey
'''

class my_online_learner:

    def __init__(self,train="/home/sduprey/My_Data/My_Cdiscount_Challenge/full_hashed_training_matrix.csv",label = '/home/sduprey/My_Data/My_Cdiscount_Challenge/full_hashed_labelling_vector.csv',test= "/home/sduprey/My_Data/My_Cdiscount_Challenge/full_hashed_testing_matrix.csv",alpha= .1,output_file='/home/sduprey/My_Data/My_Cdiscount_Challenge/submission.csv'):
        self.train=train
        self.label=label
        self.test=test
        self.alpha=alpha
        self.output_file=output_file
        
        
    def data(self, path, label_path=None):
        indices = []
        rowDatas = []
        rowNumber = 0
        for t, line in enumerate(open(path)):
            if t%3 == 0 :
                print('Row number '+line)
                rowNumber = int(line.rstrip()) 
            if t%3 == 1 :
                print("My indices")
                indices =  [int(l) for l in line.rstrip().split(',')] 
            if t%3 == 2 :
                print('My row data '+line)
                rowDatas =  [float(l) for l in line.rstrip().split(',')] 
                yield(rowNumber, indices, rowDatas)

if __name__ == "__main__":
    best_online = my_online_learner(train='/home/sduprey/My_Data/My_Tradeshift/my_training_data/train.csv',label = '/home/sduprey/My_Data/My_Tradeshift/my_training_data/trainLabels.csv',test= '/home/sduprey/My_Data/My_Tradeshift/my_training_data/test.csv',D= 2 ** 24,alpha= .1,output_file='/home/sduprey/My_Data/My_Tradeshift/submissions/sample.csv')
    best_online.train_predict()